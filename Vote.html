<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>School Voting System</title>
<style>
Â  /* Base layout */
Â  body {
Â  Â  font-family: "Arial", sans-serif;
Â  Â  margin: 0;
Â  Â  background: #f4f6fa;
Â  Â  color: #333;
Â  }
Â  nav {
Â  Â  background: #fff;
Â  Â  padding: 15px 30px;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â Â 
Â  Â  border-radius: 50px;
Â  Â  gap: 20px;
Â  Â  width: 60%;
Â  Â  margin: 30px auto;
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
Â  }
Â  nav a {
Â  Â  text-decoration: none;
Â  Â  font-size: 18px;
Â  Â  color: #444;
Â  Â  font-weight: 600;
Â  Â  padding: 10px 20px;
Â  Â  border-radius: 12px;
Â  Â  transition: all 0.3s ease;
Â  }
Â  nav a.active {
Â  Â  background: #5a4ef1;
Â  Â  color: #fff;
Â  Â  box-shadow: 0 4px 10px rgba(90,78,241,0.3);
Â  }

Â  /* Sections */
Â  section {
Â  Â  display: none;
Â  Â  padding: 20px;
Â  Â  max-width: 900px;
Â  Â  margin: auto;
Â  Â  text-align: center;
Â  }
Â  section.active { display: block; }

Â  /* Headings & buttons */
Â  h1 { font-size: 42px; font-weight: 800; margin: 0 0 10px; }
Â  .subtitle { font-size: 18px; color: #666; margin: 0 0 25px; }
Â  .btn {
Â  Â  background: #5a4ef1;
Â  Â  color: #fff;
Â  Â  padding: 14px 26px;
Â  Â  border-radius: 12px;
Â  Â  font-size: 18px;
Â  Â  font-weight: bold;
Â  Â  border: none;
Â  Â  cursor: pointer;
Â  Â  transition: background 0.3s ease, transform 0.1s ease;
Â  }
Â  .btn:hover { background: #4b40e4; }
Â  .btn:active { transform: scale(0.95); }

Â  /* Voting UI */
Â  .position-block {
Â  Â  margin: 30px 0;
Â  Â  background: #fff;
Â  Â  padding: 20px;
Â  Â  border-radius: 12px;
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
Â  Â  text-align: left;
Â  }
Â  .position-block h3 { margin: 0 0 15px; }
Â  .candidates {
Â  Â  display: flex;
Â  Â  flex-wrap: wrap;
Â  Â  gap: 16px;
Â  }
Â  .candidate-card {
Â  Â  text-align: center;
Â  Â  background: #f9f9ff;
Â  Â  padding: 15px;
Â  Â  border-radius: 12px;
Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
Â  Â  width: 200px;
Â  }
Â  .candidate-card img {
Â  Â  width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px;
Â  }
Â  .vote-btn {
Â  Â  display: block; width: 100%;
Â  Â  background: #5a4ef1; color: #fff;
Â  Â  padding: 10px; border: none; border-radius: 8px;
Â  Â  cursor: pointer; font-size: 16px; font-weight: bold;
Â  Â  transition: background 0.2s, transform 0.1s ease;
Â  }
Â  .vote-btn:hover { background: #4b40e4; }
Â  .vote-btn:active {
Â  Â  background: #4036d9; /* darker while pressed */
Â  Â  transform: scale(0.96);
Â  }
Â  .vote-btn.selected { background: #28a745; }

Â  /* PIN */
Â  #pin-section input, .pin-entry-container input {
Â  Â  padding: 12px;
Â  Â  border-radius: 10px;
Â  Â  border: 2px solid #ddd;
Â  Â  font-size: 18px;
Â  Â  outline: none;
Â  Â  width: 200px;
Â  Â  transition: all 0.3s ease;
Â  }
Â  #pin-section input:focus, .pin-entry-container input:focus {
Â  Â  border-color: #5a4ef1;
Â  Â  box-shadow: 0 0 8px rgba(90,78,241,0.3);
Â  }
Â  .pin-entry-container {
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  align-items: center;
Â  Â  gap: 15px;
Â  Â  padding: 30px;
Â  Â  background: #fff;
Â  Â  border-radius: 12px;
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
Â  }
Â  #pin-section.shake, .pin-entry-container.shake { animation: shake 0.4s; }
Â  @keyframes shake {
Â  Â  0%,100% { transform: translateX(0); }
Â  Â  25% { transform: translateX(-8px); }
Â  Â  50% { transform: translateX(8px); }
Â  Â  75% { transform: translateX(-8px); }
Â  }

Â  /* Results (improved) */
Â  #resultsContent {
Â  Â  margin-top: 30px;
Â  Â  display: grid;
Â  Â  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
Â  Â  gap: 20px;
Â  }
Â  .result-card {
Â  Â  background: #fff;
Â  Â  padding: 20px;
Â  Â  border-radius: 14px;
Â  Â  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.08);
Â  Â  text-align: left;
Â  Â  transition: transform 0.2s;
Â  }
Â  .result-card:hover { transform: translateY(-4px); }
Â  .result-card h3 { font-size: 22px; margin: 0 0 10px; }
Â  .winner-badge {
Â  Â  display: inline-block;
Â  Â  background: #28a745;
Â  Â  color: #fff;
Â  Â  font-size: 13px;
Â  Â  padding: 4px 10px;
Â  Â  border-radius: 20px;
Â  Â  margin-left: 10px;
Â  }
Â  .chart-container { margin-top: 10px; }
Â  .chart-bar {
Â  Â  height: 28px;
Â  Â  border-radius: 8px;
Â  Â  margin: 8px 0;
Â  Â  color: #fff;
Â  Â  padding-left: 10px;
Â  Â  font-size: 14px;
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  font-weight: bold;
Â  Â  background: linear-gradient(90deg, #5a4ef1, #7a6ef9);
Â  }
</style>
</head>
<body>

<nav>
Â  <a href="#" id="nav-home" class="active" data-target="home">ğŸ  Home</a>
Â  <a href="#" id="nav-vote" data-target="vote">ğŸ‘¥ Vote</a>
Â  <a href="#" id="nav-results" data-target="results">ğŸ“Š Results</a>
</nav>

<section id="home" class="active">
Â  <h1>Welcome to the School Voting System</h1>
Â  <p class="subtitle">Your voice matters. Participate in the future of our school.</p>
Â  <p>Your User ID: <span id="userId"></span></p>
Â  <button class="btn" id="startVotingBtn">Start Voting</button>
</section>

<section id="vote">
Â  <div id="pin-entry-vote" class="pin-entry-container">
Â  Â  <h2>Enter PIN to Unlock Voting</h2>
Â  Â  <input type="password" id="votePinInput" placeholder="Enter PIN">
Â  Â  <button class="btn" id="unlockVoteBtn">Unlock Voting</button>
Â  </div>
Â  <div id="voting-content" style="display:none;">
Â  Â  <h2 style="font-weight: 300; font-size: 2.2em; margin-bottom: 20px;">
Â  Â  Â  Â  <span style="font-weight: 600;">Vote</span>
Â  Â  </h2>
Â  Â  <div id="positions-container"></div>
Â  Â  <button class="btn" id="submitVotesBtn">Submit All Votes</button>
Â  </div>
</section>

<section id="results">
Â  <h2>Results (Admin Access)</h2>
Â  <div id="pin-section">
Â  Â  <input type="password" id="pinInput" placeholder="Enter PIN"/>
Â  Â  <button class="btn" id="unlockBtn">Unlock Results</button>
Â  </div>
Â  <div id="resultsContent" style="display:none;"></div>
</section>

<script>
Â  Â  /* --- Config / Data --- */
Â  Â  const BACKEND_URL = "https://ac-school-voting.onrender.com";
Â  Â  const VOTING_PIN = "123";

Â  Â  const candidateImages = {
Â  Â  Â  Â  "John": "https://randomuser.me/api/portraits/men/1.jpg",
Â  Â  Â  Â  "Alex": "https://randomuser.me/api/portraits/men/2.jpg",
Â  Â  Â  Â  "Sophia": "https://randomuser.me/api/portraits/women/3.jpg",
Â  Â  Â  Â  "Emma": "https://randomuser.me/api/portraits/women/4.jpg",
Â  Â  Â  Â  "Olivia": "https://randomuser.me/api/portraits/women/5.jpg",
Â  Â  Â  Â  "Ava": "https://randomuser.me/api/portraits/women/6.jpg",
Â  Â  Â  Â  "Liam": "https://randomuser.me/api/portraits/men/7.jpg",
Â  Â  Â  Â  "Noah": "https://randomuser.me/api/portraits/men/8.jpg",
Â  Â  Â  Â  "Ethan": "https://randomuser.me/api/portraits/men/9.jpg",
Â  Â  Â  Â  "James": "https://randomuser.me/api/portraits/men/10.jpg",
Â  Â  Â  Â  "Lucas": "https://randomuser.me/api/portraits/men/11.jpg",
Â  Â  Â  Â  "Mason": "https://randomuser.me/api/portraits/men/12.jpg",
Â  Â  Â  Â  "Isabella": "https://randomuser.me/api/portraits/women/13.jpg",
Â  Â  Â  Â  "Mia": "https://randomuser.me/api/portraits/women/14.jpg",
Â  Â  Â  Â  "Charlotte": "https://randomuser.me/api/portraits/women/15.jpg",
Â  Â  Â  Â  "Amelia": "https://randomuser.me/api/portraits/women/16.jpg"
Â  Â  };

Â  Â  // Per-voter selections
Â  Â  let selections = {};
Â  Â  let positions = [];
Â  Â  let candidates = {};

Â  Â  // User ID (simple timestamp for display)
Â  Â  const userIdEl = document.getElementById("userId");

Â  Â  /* --- Navigation --- */
Â  Â  const sections = ["home", "vote", "results"];
Â  Â  const navLinks = document.querySelectorAll("nav a");
Â  Â  navLinks.forEach(a => a.addEventListener("click", (e) => {
Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  const target = a.getAttribute("data-target");
Â  Â  Â  Â  showSection(target);
Â  Â  }));

Â  Â  function showSection(id) {
Â  Â  Â  Â  sections.forEach(s => document.getElementById(s).classList.remove("active"));
Â  Â  Â  Â  document.getElementById(id).classList.add("active");
Â  Â  Â  Â  navLinks.forEach(a => a.classList.remove("active"));
Â  Â  Â  Â  const link = document.querySelector(`nav a[data-target="${id}"]`);
Â  Â  Â  Â  if (link) link.classList.add("active");
Â  Â  }

Â  Â  // --- Data Fetching and UI Rendering ---
Â  Â Â 
Â  Â  // Fetch positions and candidates from the backend
Â  Â  async function fetchPositions() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(`${BACKEND_URL}/positions`);
Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('Network response was not ok');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  positions = data.positions;
Â  Â  Â  Â  Â  Â  candidates = data.candidates;
Â  Â  Â  Â  Â  Â  positions.forEach(p => selections[p] = null);
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Failed to fetch positions:', error);
Â  Â  Â  Â  Â  Â  alert('Failed to load voting data. Please check the server.');
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â  // Call this function when the page loads
Â  Â  document.addEventListener("DOMContentLoaded", async () => {
Â  Â  Â  Â  await fetchPositions();
Â  Â  Â  Â  userIdEl.textContent = Date.now();
Â  Â  });

Â  Â  /* --- Voting UI render --- */
Â  Â  const positionsContainer = document.getElementById("positions-container");

Â  Â  function renderVotingUI() {
Â  Â  Â  Â  positionsContainer.innerHTML = "";
Â  Â  Â  Â  positions.forEach(pos => {
Â  Â  Â  Â  Â  Â  const block = document.createElement("div");
Â  Â  Â  Â  Â  Â  block.className = "position-block";
Â  Â  Â  Â  Â  Â  block.innerHTML = `<h3>${pos}</h3><div class="candidates"></div>`;
Â  Â  Â  Â  Â  Â  const area = block.querySelector(".candidates");

Â  Â  Â  Â  Â  Â  candidates[pos].forEach(name => {
Â  Â  Â  Â  Â  Â  Â  Â  const imageUrl = candidateImages[name] || "https://via.placeholder.com/80";
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  card.className = "candidate-card";
Â  Â  Â  Â  Â  Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <img src="${imageUrl}" alt="${name}"/>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p style="margin:6px 0 10px; font-weight:600;">${name}</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="vote-btn">Vote</button>
Â  Â  Â  Â  Â  Â  Â  Â  `;

Â  Â  Â  Â  Â  Â  Â  Â  const btn = card.querySelector(".vote-btn");
Â  Â  Â  Â  Â  Â  Â  Â  btn.addEventListener("click", () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  selections[pos] = name;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  area.querySelectorAll(".vote-btn").forEach(b => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.classList.remove("selected");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  b.textContent = "Vote";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.classList.add("selected");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.textContent = "Selected";
Â  Â  Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  Â  Â  if (selections[pos] === name) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.classList.add("selected");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.textContent = "Selected";
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  area.appendChild(card);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  positionsContainer.appendChild(block);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  /* --- Start voting --- */
Â  Â  document.getElementById("startVotingBtn").addEventListener("click", () => {
Â  Â  Â  Â  showSection("vote");
Â  Â  Â  Â  document.getElementById("pin-entry-vote").style.display = "flex";
Â  Â  Â  Â  document.getElementById("voting-content").style.display = "none";
Â  Â  });

Â  Â  /* --- Unlock Voting --- */
Â  Â  document.getElementById("unlockVoteBtn").addEventListener("click", () => {
Â  Â  Â  Â  const inputPin = document.getElementById("votePinInput").value;
Â  Â  Â  Â  const pinBox = document.getElementById("pin-entry-vote");
Â  Â  Â  Â  if (inputPin === VOTING_PIN) {
Â  Â  Â  Â  Â  Â  pinBox.style.display = "none";
Â  Â  Â  Â  Â  Â  document.getElementById("voting-content").style.display = "block";
Â  Â  Â  Â  Â  Â  renderVotingUI();
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  alert("Incorrect PIN. Please try again.");
Â  Â  Â  Â  Â  Â  pinBox.classList.add("shake");
Â  Â  Â  Â  Â  Â  setTimeout(() => pinBox.classList.remove("shake"), 400);
Â  Â  Â  Â  }
Â  Â  });

Â  Â  /* --- Submit votes --- */
Â  Â  document.getElementById("submitVotesBtn").addEventListener("click", async () => {
Â  Â  Â  Â  const allChosen = positions.every(p => selections[p] !== null);
Â  Â  Â  Â  if (!allChosen) {
Â  Â  Â  Â  Â  Â  alert("Please vote for all positions!");
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(`${BACKEND_URL}/vote`, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ selections })
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Votes recorded. Next voter, please.");
Â  Â  Â  Â  Â  Â  Â  Â  positions.forEach(p => selections[p] = null);
Â  Â  Â  Â  Â  Â  Â  Â  showSection("home");
Â  Â  Â  Â  Â  Â  Â  Â  userIdEl.textContent = Date.now();
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("pin-entry-vote").style.display = "flex";
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("voting-content").style.display = "none";
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Failed to submit votes.");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Failed to submit votes:', error);
Â  Â  Â  Â  Â  Â  alert('An error occurred while submitting votes.');
Â  Â  Â  Â  }
Â  Â  });

Â  Â  /* --- Results (PIN) --- */
Â  Â  document.getElementById("unlockBtn").addEventListener("click", async () => {
Â  Â  Â  Â  const input = document.getElementById("pinInput").value;
Â  Â  Â  Â  const pinBox = document.getElementById("pin-section");
Â  Â  Â  Â Â 
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(`${BACKEND_URL}/admin/login`, {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ pin: input })
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  if (data.success) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById("resultsContent").style.display = "grid";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderResults();
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  pinBox.classList.add("shake");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => pinBox.classList.remove("shake"), 400);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  pinBox.classList.add("shake");
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => pinBox.classList.remove("shake"), 400);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Failed to login:', error);
Â  Â  Â  Â  Â  Â  alert('An error occurred while trying to log in.');
Â  Â  Â  Â  }
Â  Â  });

Â  Â  /* --- Results render --- */
Â  Â  async function renderResults() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(`${BACKEND_URL}/results`);
Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  const container = document.getElementById("resultsContent");
Â  Â  Â  Â  Â  Â  container.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn" id="resetVotesBtn" style="margin-top: 20px;">Reset All Votes</button>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  positions.forEach(pos => {
Â  Â  Â  Â  Â  Â  Â  Â  const card = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  card.className = "result-card";
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const positionData = data[pos] || {};

Â  Â  Â  Â  Â  Â  Â  Â  const sorted = Object.entries(positionData).sort((a,b) => b[1] - a[1]);
Â  Â  Â  Â  Â  Â  Â  Â  const topCount = sorted.length ? sorted[0][1] : 0;
Â  Â  Â  Â  Â  Â  Â  Â  const winner = sorted.length ? sorted[0][0] : "â€”";
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const h = document.createElement("h3");
Â  Â  Â  Â  Â  Â  Â  Â  h.innerHTML = `${pos} <span class="winner-badge">Winner: ${winner}</span>`;
Â  Â  Â  Â  Â  Â  Â  Â  card.appendChild(h);

Â  Â  Â  Â  Â  Â  Â  Â  const chart = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  chart.className = "chart-container";

Â  Â  Â  Â  Â  Â  Â  Â  if (!sorted.length) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const p = document.createElement("p");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  p.textContent = "No votes yet.";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.appendChild(p);
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sorted.forEach(([name, count]) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const pct = topCount === 0 ? 0 : (count / topCount) * 100;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const bar = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bar.className = "chart-bar";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bar.style.width = pct + "%";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  bar.textContent = `${name}: ${count}`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chart.appendChild(bar);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  card.appendChild(chart);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  container.appendChild(card);
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  // Add the event listener for the new button
Â  Â  Â  Â  Â  Â  document.getElementById("resetVotesBtn").addEventListener("click", async () => {
Â  Â  Â  Â  Â  Â  Â  Â  const pin = prompt("Please enter the admin PIN to reset all votes:");
Â  Â  Â  Â  Â  Â  Â  Â  if (!pin) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return; // User cancelled
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const response = await fetch(`${BACKEND_URL}/reset`, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ pin })
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("All votes have been successfully reset.");
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  renderResults(); // Refresh the results to show 0s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const errorData = await response.json();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert(`Failed to reset votes: ${errorData.error}`);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.error('Failed to reset votes:', error);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  alert("An error occurred while trying to reset votes.");
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Failed to fetch results:', error);
Â  Â  Â  Â  Â  Â  alert('An error occurred while fetching results.');
Â  Â  Â  Â  }
Â  Â  }
</script>
</body>
</html>